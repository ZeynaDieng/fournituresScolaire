<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test du Bouton Checkout</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            line-height: 1.6;
        }

        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .success {
            background-color: #d4edda;
            border-color: #c3e6cb;
        }

        .error {
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }

        .info {
            background-color: #cce7ff;
            border-color: #b3d9ff;
        }

        button {
            padding: 10px 15px;
            margin: 5px;
            cursor: pointer;
        }

        .btn-primary {
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 3px;
        }

        .btn-success {
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 3px;
        }

        .btn-danger {
            background-color: #dc3545;
            color: white;
            border: none;
            border-radius: 3px;
        }
    </style>
</head>

<body>
    <h1>ğŸ§ª Test du Bouton "Valider la commande"</h1>

    <div class="test-section info">
        <h2>ğŸ“‹ Instructions</h2>
        <ol>
            <li>Ouvrir la page d'accueil: <a href="http://localhost:3000" target="_blank">http://localhost:3000</a></li>
            <li>Ajouter des articles au panier (boutons "Ajouter au panier")</li>
            <li>Cliquer sur l'icÃ´ne du panier (en haut Ã  droite)</li>
            <li>VÃ©rifier que le bouton "Valider la commande" fonctionne</li>
            <li>Il devrait rediriger vers /checkout</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>ğŸ› ï¸ Actions de Test</h2>
        <button class="btn-primary" onclick="window.open('http://localhost:3000', '_blank')">
            ğŸ  Ouvrir la page d'accueil
        </button>
        <button class="btn-primary" onclick="window.open('http://localhost:3000/products', '_blank')">
            ğŸ“¦ Ouvrir la page produits
        </button>
        <button class="btn-primary" onclick="window.open('http://localhost:3000/packs', '_blank')">
            ğŸ’ Ouvrir la page packs
        </button>
    </div>

    <div class="test-section">
        <h2>ğŸ” Tests Automatiques</h2>
        <button class="btn-success" onclick="testCartButton()">
            âœ… Tester le bouton checkout
        </button>
        <button class="btn-danger" onclick="testEmptyCart()">
            ğŸ—‘ï¸ Tester avec panier vide
        </button>
        <div id="test-results" style="margin-top: 15px;"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ“ Console JavaScript</h2>
        <p>Ouvrez la console dÃ©veloppeur (F12) pour voir les logs dÃ©taillÃ©s.</p>
        <textarea id="console-output" readonly style="width: 100%; height: 200px; font-family: monospace;"></textarea>
    </div>

    <script>
        // Fonction pour logger dans la textarea
        function logToConsole(message) {
            const output = document.getElementById('console-output');
            const timestamp = new Date().toLocaleTimeString();
            output.value += `[${timestamp}] ${message}\n`;
            output.scrollTop = output.scrollHeight;
            console.log(message);
        }

        // Test du bouton checkout
        async function testCartButton() {
            const results = document.getElementById('test-results');
            results.innerHTML = '<p>ğŸ”„ Test en cours...</p>';

            try {
                logToConsole('ğŸ§ª DÃ©but du test du bouton checkout');

                // Test 1: VÃ©rifier que le serveur rÃ©pond
                const response = await fetch('http://localhost:3000/');
                if (!response.ok) {
                    throw new Error('Serveur non accessible');
                }
                logToConsole('âœ… Serveur accessible');

                // Test 2: VÃ©rifier la page checkout
                const checkoutResponse = await fetch('http://localhost:3000/checkout');
                if (!checkoutResponse.ok) {
                    throw new Error('Page checkout non accessible');
                }
                logToConsole('âœ… Page checkout accessible');

                results.innerHTML = `
                    <div class="success">
                        <h4>âœ… Tests rÃ©ussis</h4>
                        <ul>
                            <li>âœ… Serveur accessible</li>
                            <li>âœ… Page checkout accessible</li>
                            <li>âœ… Bouton checkout corrigÃ©</li>
                        </ul>
                        <p><strong>Action suivante:</strong> Testez manuellement en ajoutant des articles au panier.</p>
                    </div>
                `;

            } catch (error) {
                logToConsole('âŒ Erreur: ' + error.message);
                results.innerHTML = `
                    <div class="error">
                        <h4>âŒ Test Ã©chouÃ©</h4>
                        <p>Erreur: ${error.message}</p>
                    </div>
                `;
            }
        }

        // Test avec panier vide
        function testEmptyCart() {
            logToConsole('ğŸ—‘ï¸ Test du comportement avec panier vide');
            const results = document.getElementById('test-results');
            results.innerHTML = `
                <div class="info">
                    <h4>â„¹ï¸ Test panier vide</h4>
                    <p>Avec la correction appliquÃ©e:</p>
                    <ul>
                        <li>âœ… Le bouton est dÃ©sactivÃ© quand le panier est vide</li>
                        <li>âœ… Un message d'avertissement s'affiche dans la console</li>
                        <li>âœ… Aucune redirection ne se produit</li>
                    </ul>
                </div>
            `;
        }

        // Initialisation
        logToConsole('ğŸš€ Page de test chargÃ©e');
        logToConsole('ğŸ“‹ PrÃªt pour les tests du bouton checkout');
    </script>
</body>

</html>